---
import "../styles/modulo2-carousel.css";
import modulo2Script from "../js/modulo2-carousel.js?url";

const base = import.meta.env.BASE_URL;

const items = [
  { label: "Family, As We Are.", slug: "family-as-we-are", img: `${base}/images/modulo-2-carousel/tile-1.webp` },
  { label: "Entrepreneurs", slug: "entrepreneurs", img: `${base}/images/modulo-2-carousel/tile-2.webp` },
  { label: "Early Joys", slug: "early-joys", img: `${base}/images/modulo-2-carousel/tile-3.webp` },
  { label: "Authentic Everyday Stories", slug: "authentic-everyday-stories", img: `${base}/images/modulo-2-carousel/tile-4.webp` },
  { label: "Working Lives: Passion, Purpose & Profession", slug: "working-lives", img: `${base}/images/modulo-2-carousel/tile-5.webp` },
  { label: "Coffee Experience", slug: "coffee-experience", img: `${base}/images/modulo-2-carousel/tile-6.webp` },
  { label: "Landscapes & Textures", slug: "landscapes-textures", img: `${base}/images/modulo-2-carousel/tile-7.webp` },
];
---

<section class="m2 section" aria-labelledby="m2-title">
  <div class="m2__inner section__inner">
    <header class="m2__header">
      <h2 class="m2__title" id="m2-title">Portfolio highlights</h2>
      <p class="m2__subtitle">Explore curated stories and photo series.</p>
    </header>

    <div class="m2__carousel" data-m2>
      <div class="m2__track" data-m2-track>
        {items.map((it, idx) => (
          <a
            class="m2__tile"
            href={`${base}/gallery#${it.slug}`}
            data-m2-index={idx}
            aria-label={it.label}
          >
            <figure class="m2__frame">
              <img class="m2__img" src={it.img} alt={it.label} loading="lazy" decoding="async" />
              <figcaption class="m2__overlay">
                <span class="m2__label">{it.label}</span>
              </figcaption>
            </figure>
          </a>
        ))}
      </div>

      <div class="m2__dots" data-m2-dots aria-label="Carousel pagination">
        {items.map((_, i) => (
          <button
            class={`m2__dot ${i === 0 ? "is-active" : ""}`}
            type="button"
            data-m2-dot={i}
            aria-label={`Go to item ${i + 1}`}
            aria-current={i === 0 ? "true" : "false"}
          />
        ))}
      </div>
    </div>
  </div>

  <script src={modulo2Script}></script>
</section>
